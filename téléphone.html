<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<h2>Scanner un carton</h2>
<div id="reader" style="width: 300px;"></div>
<p id="result"></p>

<script>
const API = "TON_URL_API";

function verifier(code) {
  fetch(API, {
    method: "POST",
    body: JSON.stringify({ code })
  })
  .then(r => r.json())
  .then(data => {
    const res = document.getElementById("result");

    if (data.status === "valid") {
      res.textContent = "✔ Carton authentique";
      res.style.color = "green";
    } else {
      res.textContent = "❌ Carton inconnu (non acheté)";
      res.style.color = "red";
    }
  });
}

new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 })
  .render((decodedText) => verifier(decodedText));
</script>

</body>
</html>
